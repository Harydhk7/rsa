-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.answers
(
    ans_id bigserial NOT NULL,
    audit_id character varying COLLATE pg_catalog."default",
    user_id character varying COLLATE pg_catalog."default",
    sections character varying[] COLLATE pg_catalog."default",
    answers jsonb,
    CONSTRAINT answers_pkey PRIMARY KEY (ans_id)
);

CREATE TABLE IF NOT EXISTS public.audit_assignment
(
    audit_type_id character varying COLLATE pg_catalog."default",
    stretch_name character varying COLLATE pg_catalog."default",
    start_date timestamp without time zone,
    submit_date timestamp without time zone,
    type_of_audit character varying COLLATE pg_catalog."default",
    audit_plan_id character varying COLLATE pg_catalog."default",
    audit_id character varying COLLATE pg_catalog."default" NOT NULL,
    created_by character varying COLLATE pg_catalog."default",
    sections character varying[] COLLATE pg_catalog."default",
    started_on timestamp without time zone,
    submitted_on timestamp without time zone,
    started_by character varying COLLATE pg_catalog."default",
    state character varying COLLATE pg_catalog."default",
    district character varying COLLATE pg_catalog."default",
    existing_km_chainage character varying COLLATE pg_catalog."default",
    landmark character varying COLLATE pg_catalog."default",
    road_type character varying COLLATE pg_catalog."default",
    landuse_pattern character varying COLLATE pg_catalog."default",
    type_of_terrain character varying COLLATE pg_catalog."default",
    file_save character varying[] COLLATE pg_catalog."default",
    status character varying COLLATE pg_catalog."default",
    auditor_stretch jsonb,
    auditor character varying COLLATE pg_catalog."default",
    prev_auditor character varying COLLATE pg_catalog."default",
    CONSTRAINT audit_assignment_pkey PRIMARY KEY (audit_id),
    CONSTRAINT auditid UNIQUE (audit_id)
);

CREATE TABLE IF NOT EXISTS public.audit_plan
(
    audit_type_id character varying COLLATE pg_catalog."default",
    stretch_name character varying COLLATE pg_catalog."default",
    state character varying COLLATE pg_catalog."default",
    district character varying COLLATE pg_catalog."default",
    name_of_road character varying COLLATE pg_catalog."default",
    road_number character varying COLLATE pg_catalog."default",
    no_of_lanes character varying COLLATE pg_catalog."default",
    road_owning_agency character varying COLLATE pg_catalog."default",
    chainage_start character varying COLLATE pg_catalog."default",
    chainage_end character varying COLLATE pg_catalog."default",
    location_start character varying COLLATE pg_catalog."default",
    location_end character varying COLLATE pg_catalog."default",
    latitude_start character varying COLLATE pg_catalog."default",
    latitude_end character varying COLLATE pg_catalog."default",
    stretch_length double precision,
    created_on timestamp without time zone,
    updated_on timestamp without time zone,
    updated_by character varying COLLATE pg_catalog."default",
    delete_status boolean,
    deleted_on timestamp without time zone,
    deleted_by character varying COLLATE pg_catalog."default",
    file_save character varying[] COLLATE pg_catalog."default",
    audit_plan_id character varying COLLATE pg_catalog."default" NOT NULL,
    status character varying COLLATE pg_catalog."default",
    CONSTRAINT audit_plan_pkey PRIMARY KEY (audit_plan_id)
);

CREATE TABLE IF NOT EXISTS public.audit_type
(
    audit_type_id character varying COLLATE pg_catalog."default" NOT NULL,
    stretch_name character varying COLLATE pg_catalog."default",
    road_type character varying COLLATE pg_catalog."default",
    audit_method character varying COLLATE pg_catalog."default",
    sections character varying[] COLLATE pg_catalog."default",
    questions jsonb,
    special_audit_questions jsonb,
    created_on timestamp without time zone,
    last_updated timestamp without time zone,
    delete_status boolean,
    deleted_on timestamp without time zone,
    created_by character varying COLLATE pg_catalog."default",
    updated_by character varying COLLATE pg_catalog."default",
    updated_on timestamp without time zone,
    stage character varying COLLATE pg_catalog."default",
    status character varying COLLATE pg_catalog."default",
    CONSTRAINT audittype_id PRIMARY KEY (audit_type_id),
    CONSTRAINT audit_typeid UNIQUE (audit_type_id)
);

CREATE TABLE IF NOT EXISTS public.dropdown_values
(
    s_no bigserial NOT NULL,
    audit_method_dd character varying COLLATE pg_catalog."default",
    road_type_dd character varying COLLATE pg_catalog."default",
    stage_dd character varying COLLATE pg_catalog."default",
    type_of_audit character varying COLLATE pg_catalog."default",
    data_type character varying COLLATE pg_catalog."default",
    functionality character varying COLLATE pg_catalog."default",
    master_table character varying COLLATE pg_catalog."default",
    field_type character varying COLLATE pg_catalog."default",
    CONSTRAINT dropdown_values_pkey PRIMARY KEY (s_no)
);

CREATE TABLE IF NOT EXISTS public.master_table
(
    road_type_id character varying COLLATE pg_catalog."default",
    stage_id character varying COLLATE pg_catalog."default",
    section_id character varying COLLATE pg_catalog."default",
    q_id character varying COLLATE pg_catalog."default",
    q_sub_id character varying COLLATE pg_catalog."default",
    dependency_dd character varying COLLATE pg_catalog."default",
    master_table character varying COLLATE pg_catalog."default",
    irc_help_tool character varying COLLATE pg_catalog."default",
    s_no bigint NOT NULL,
    show_option boolean,
    img_path character varying[] COLLATE pg_catalog."default",
    CONSTRAINT master_table_pkey PRIMARY KEY (s_no)
);

CREATE TABLE IF NOT EXISTS public.question_bank
(
    road_type_id character varying COLLATE pg_catalog."default",
    road_type character varying COLLATE pg_catalog."default",
    stage_id character varying COLLATE pg_catalog."default",
    stage character varying COLLATE pg_catalog."default",
    section_id character varying COLLATE pg_catalog."default",
    section character varying COLLATE pg_catalog."default",
    issues_list character varying COLLATE pg_catalog."default",
    q_id character varying COLLATE pg_catalog."default" NOT NULL,
    questions character varying COLLATE pg_catalog."default",
    field_type character varying COLLATE pg_catalog."default",
    conditions character varying COLLATE pg_catalog."default",
    master_table character varying COLLATE pg_catalog."default",
    functionality character varying COLLATE pg_catalog."default",
    data_type character varying COLLATE pg_catalog."default",
    irc_help_tool character varying COLLATE pg_catalog."default",
    irc_path character varying[] COLLATE pg_catalog."default",
    CONSTRAINT question_banks_pkey PRIMARY KEY (q_id)
);

CREATE TABLE IF NOT EXISTS public.retrieval_id
(
    road_type_id character varying COLLATE pg_catalog."default",
    stage_id character varying COLLATE pg_catalog."default",
    section_id character varying COLLATE pg_catalog."default",
    section character varying COLLATE pg_catalog."default",
    retrieval_id character varying COLLATE pg_catalog."default",
    q_id character varying COLLATE pg_catalog."default",
    issue character varying COLLATE pg_catalog."default",
    q_sub_id character varying COLLATE pg_catalog."default",
    master_table character varying COLLATE pg_catalog."default",
    s_no bigserial NOT NULL
);

CREATE TABLE IF NOT EXISTS public.roles
(
    s_no bigserial NOT NULL,
    dd_values character varying COLLATE pg_catalog."default",
    CONSTRAINT roles_pkey PRIMARY KEY (s_no)
);

CREATE TABLE IF NOT EXISTS public.suggestion_mapping
(
    s_no integer,
    road_type_id character varying COLLATE pg_catalog."default",
    stage_id character varying COLLATE pg_catalog."default",
    section_id character varying COLLATE pg_catalog."default",
    section character varying COLLATE pg_catalog."default",
    retrieval_id character varying COLLATE pg_catalog."default" NOT NULL,
    issue character varying COLLATE pg_catalog."default",
    suggestion_id character varying COLLATE pg_catalog."default",
    suggestion character varying COLLATE pg_catalog."default",
    CONSTRAINT suggestion_mapping_pkey PRIMARY KEY (retrieval_id),
    CONSTRAINT retrieval_link_id UNIQUE (retrieval_id),
    CONSTRAINT suggestion_link_id UNIQUE (suggestion_id)
);

CREATE TABLE IF NOT EXISTS public.template
(
    template_id character varying COLLATE pg_catalog."default" NOT NULL,
    stretch_name character varying COLLATE pg_catalog."default",
    road_type character varying COLLATE pg_catalog."default",
    audit_method character varying COLLATE pg_catalog."default",
    sections character varying[] COLLATE pg_catalog."default",
    questions jsonb,
    special_audit_questions jsonb,
    created_on timestamp without time zone,
    last_updated timestamp without time zone,
    delete_status boolean,
    deleted_on timestamp without time zone,
    created_by character varying COLLATE pg_catalog."default",
    updated_by character varying COLLATE pg_catalog."default",
    updated_on timestamp without time zone,
    stage character varying COLLATE pg_catalog."default",
    CONSTRAINT template_pkey PRIMARY KEY (template_id)
);

CREATE TABLE IF NOT EXISTS public.users
(
    user_id character varying COLLATE pg_catalog."default" NOT NULL,
    first_name character varying COLLATE pg_catalog."default",
    password character varying COLLATE pg_catalog."default",
    email character varying COLLATE pg_catalog."default",
    pincode bigint,
    created_by character varying COLLATE pg_catalog."default",
    designation character varying COLLATE pg_catalog."default",
    contact_number character varying COLLATE pg_catalog."default",
    state character varying COLLATE pg_catalog."default",
    district character varying COLLATE pg_catalog."default",
    department character varying COLLATE pg_catalog."default",
    alternate_number character varying COLLATE pg_catalog."default",
    role character varying COLLATE pg_catalog."default",
    login_status boolean,
    district_code character varying COLLATE pg_catalog."default",
    state_code character varying COLLATE pg_catalog."default",
    file_save character varying[] COLLATE pg_catalog."default",
    last_name character varying COLLATE pg_catalog."default",
    CONSTRAINT users_pkey PRIMARY KEY (user_id),
    CONSTRAINT userid UNIQUE (user_id)
);

CREATE TABLE IF NOT EXISTS public.users_logged_in
(
    users character varying COLLATE pg_catalog."default",
    login_status boolean,
    logged_in timestamp without time zone,
    user_id character varying COLLATE pg_catalog."default",
    logged_out timestamp without time zone,
    s_no bigserial NOT NULL,
    CONSTRAINT users_logged_in_pkey PRIMARY KEY (s_no)
);

ALTER TABLE IF EXISTS public.answers
    ADD CONSTRAINT audit_id FOREIGN KEY (audit_id)
    REFERENCES public.audit_assignment (audit_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.answers
    ADD CONSTRAINT userid FOREIGN KEY (user_id)
    REFERENCES public.users (user_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.audit_assignment
    ADD CONSTRAINT audit_planid FOREIGN KEY (audit_plan_id)
    REFERENCES public.audit_plan (audit_plan_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.audit_assignment
    ADD CONSTRAINT audit_typeid FOREIGN KEY (audit_type_id)
    REFERENCES public.audit_type (audit_type_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.audit_plan
    ADD CONSTRAINT audit_typeid FOREIGN KEY (audit_type_id)
    REFERENCES public.audit_type (audit_type_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;

26-12-2024: Vishal 

ALTER TABLE IF EXISTS public.dropdown_values
    ADD COLUMN road_owning_agency character varying;

16:09 :

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN submitted_on timestamp without time zone;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN last_updated_by character varying;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN last_updated_on timestamp without time zone;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN updated_count bigint;

CREATE TABLE public.hfaz
(
    hfaz_id character varying,
    audit_id character varying,
    start_chainage character varying,
    end_chainage character varying,
    landmark character varying,
    sections character varying,
    stretch_type character varying,
    PRIMARY KEY (hfaz_id),
    CONSTRAINT audit_id FOREIGN KEY (audit_id)
        REFERENCES public.audit_assignment (audit_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
);

ALTER TABLE IF EXISTS public.hfaz
    OWNER to postgres;

27-12-2024 - Vishal

ALTER TABLE IF EXISTS public.answers DROP COLUMN IF EXISTS sections;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN section_count bigint;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN section character varying;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN retrieval_ids character varying[];

30-12-2024: Vishal

ALTER TABLE IF EXISTS public.suggestion_mapping
    ADD COLUMN rsilt_category character varying;

ALTER TABLE IF EXISTS public.suggestion_mapping
    ADD COLUMN rsilt_road_type character varying;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN delete_status boolean;

ALTER TABLE IF EXISTS public.suggestion_mapping
    ADD COLUMN image_path character varying;

CREATE TABLE public.report
(
    s_no bigserial,
    audit_id character varying,
    rsa_data jsonb,
    auditor character varying,
    checked_by character varying,
    executive_summary character varying,
    background character varying,
    irad_data jsonb,
    sanjaya_data jsonb,
    auditor_comment character varying,
    final_comment character varying,
    PRIMARY KEY (s_no),
    CONSTRAINT audit_id FOREIGN KEY (audit_id)
        REFERENCES public.audit_assignment (audit_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID,
    CONSTRAINT checked_by FOREIGN KEY (checked_by)
        REFERENCES public.users (user_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
);

ALTER TABLE IF EXISTS public.report
    OWNER to postgres;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN count bigint;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN hfaz_data jsonb;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN status character varying;

31-12-2024 - Vishal

ALTER TABLE IF EXISTS public.report
    ADD COLUMN last_updated timestamp without time zone;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN updated_by character varying;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN updated_count bigint;

2-01-2025 - Vishal

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN kml_file character varying;

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN comments character varying;

CREATE TABLE public.report_comment
(
    s_no bigserial,
    audit_id character varying,
    page_no bigint,
    section character varying,
    comments character varying,
    PRIMARY KEY (s_no),
    CONSTRAINT audit_id FOREIGN KEY (audit_id)
        REFERENCES public.audit_assignment (audit_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
);

ALTER TABLE IF EXISTS public.report_comment
    OWNER to postgres;

7-01-2025 - Vishal

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN stretch_length bigint;

    
10-01-2024 - Vishal

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN stretch_length double precision;

16-01-2025 - Vishal

ALTER TABLE IF EXISTS public.hfaz
    RENAME sections TO hfaz_section;

ALTER TABLE IF EXISTS public.hfaz
    ADD COLUMN section character varying;

17-01-2025 - Vishal

ALTER TABLE IF EXISTS public.question_bank
    ADD COLUMN hide_option boolean;

20-01-2025 - Vishal

ALTER TABLE IF EXISTS public.users
    ADD CONSTRAINT email UNIQUE (email)
    INCLUDE (email);


21-01-2025 - Vishal

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN start_chainage bigint;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN end_chainage bigint;

ALTER TABLE IF EXISTS public.hfaz DROP COLUMN IF EXISTS section;

ALTER TABLE IF EXISTS public.hfaz
    ADD COLUMN sections jsonb;

24-01-2025 - Vishal

ALTER TABLE public.answers
    ALTER COLUMN start_chainage TYPE double precision;

ALTER TABLE public.answers
    ALTER COLUMN end_chainage TYPE double precision;

28-01-2025 - Vishal

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN general_obs boolean;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN critical_obs boolean;

4:42:

ALTER TABLE IF EXISTS public.report DROP COLUMN IF EXISTS executive_summary;

ALTER TABLE IF EXISTS public.report DROP COLUMN IF EXISTS background;

ALTER TABLE IF EXISTS public.report DROP COLUMN IF EXISTS irad_data;

ALTER TABLE IF EXISTS public.report DROP COLUMN IF EXISTS sanjaya_data;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN background_details jsonb;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN executive_summary jsonb;

ALTER TABLE IF EXISTS public.report DROP COLUMN IF EXISTS hfaz_data;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN hfaz_data character varying;

5:15:

ALTER TABLE IF EXISTS public.report DROP COLUMN IF EXISTS executive_summary;

29-01-2025 - Vishal

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN sub_section jsonb;

3-02-2025 - Vishal

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN hfaz_id character varying;
ALTER TABLE IF EXISTS public.answers
    ADD CONSTRAINT hfaz_id FOREIGN KEY (hfaz_id)
    REFERENCES public.hfaz (hfaz_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN roadside character varying;

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN gps_location character varying;


6-02-2025 - Vishal


ALTER TABLE IF EXISTS public.report DROP COLUMN IF EXISTS hfaz_data;

ALTER TABLE IF EXISTS public.report
    ADD COLUMN hfaz_data character varying[];

ALTER TABLE IF EXISTS public.report
    ADD COLUMN report character varying;

10-02-2025 - Vishal

ALTER TABLE IF EXISTS public.report
    ADD COLUMN suggestion character varying;

13-02-2025 - Vishal

ALTER TABLE IF EXISTS public.suggestion_mapping DROP CONSTRAINT IF EXISTS suggestion_mapping_pkey;

ALTER TABLE IF EXISTS public.suggestion_mapping
    ADD CONSTRAINT suggestion_mapping_pkey PRIMARY KEY (suggestion_id)
    INCLUDE (suggestion_id);


17-02-2025 - Vishal

ALTER TABLE IF EXISTS public.report_comment
    ADD COLUMN comment_date timestamp without time zone;

19-02-2025 - Vishal

ALTER TABLE IF EXISTS public.audit_plan
    ADD COLUMN state_name character varying;

ALTER TABLE IF EXISTS public.audit_plan
    ADD COLUMN district_name character varying;

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN merged_report character varying;

20-03-2025 - Vishal

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN hfaz boolean;

21-03-2025 - Vishal

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN new_issue character varying[];

ALTER TABLE IF EXISTS public.answers
    ADD COLUMN new_suggestion character varying[];

7-04-2025: 

CREATE TABLE IF NOT EXISTS public.geojson
(
    "Name" text COLLATE pg_catalog."default",
    "Description" text COLLATE pg_catalog."default",
    geometry geometry,
    audit_type_id text COLLATE pg_catalog."default",
    stretch_name text COLLATE pg_catalog."default"
);

CREATE TABLE IF NOT EXISTS public.geojson_audit_stretch
(
    "Name" text COLLATE pg_catalog."default",
    "Description" text COLLATE pg_catalog."default",
    geometry geometry,
    audit_id text COLLATE pg_catalog."default",
    stretch_name text COLLATE pg_catalog."default"
);


22-05-2025: Vishal

ALTER TABLE IF EXISTS public.dropdown_values
    ADD COLUMN stage_id character varying;

ALTER TABLE IF EXISTS public.dropdown_values
    ADD COLUMN road_type_id character varying;

26-05-2025 - Vishal

ALTER TABLE IF EXISTS public.template
    ADD COLUMN road_type_id character varying;

ALTER TABLE IF EXISTS public.template
    ADD COLUMN stage_id character varying;
    

30-05-2025: Vishal

CREATE TABLE public.answer_auditwise
(
    s_no bigserial,
    audit_id character varying,
    section_id character varying,
    section_count bigint,
    submitted_on timestamp with time zone,
    retrieval_ids character varying[],
    start_chainage double precision,
    end_chainage double precision,
    roadside character varying,
    gps_location character varying,
    sub_section jsonb,
    file_upload character varying,
    PRIMARY KEY (s_no)
);

ALTER TABLE IF EXISTS public.answer_auditwise
    OWNER to postgres;
ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN general_obs boolean;

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN critical_obs boolean;
ALTER TABLE IF EXISTS public.answer_auditwise
    ADD CONSTRAINT audit_id FOREIGN KEY (audit_id)
    REFERENCES public.audit_assignment (audit_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

30-05-2025: Vishal

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN auditor character varying;
ALTER TABLE IF EXISTS public.answer_auditwise
    ADD CONSTRAINT auditor FOREIGN KEY (auditor)
    REFERENCES public.users (user_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN issues jsonb;

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN q_id character varying;

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN answer character varying;

2-06-2025 : Vishal

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN last_updated_by character varying;

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN last_update_on timestamp with time zone DEFAULT now();

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN new_issue character varying[];

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN new_suggestion character varying[];

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN updated_count bigint;

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN delete_status boolean;

3-06-2025 : Vishal

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN hfaz_id character varying;

6-06-2025: Vishal

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN created_on timestamp with time zone;

11-06-2025 - Vishal

ALTER TABLE IF EXISTS public.hfaz
    ADD COLUMN start_gps character varying;

ALTER TABLE IF EXISTS public.hfaz
    ADD COLUMN end_gps character varying;

18-06-2025: Vishal

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN chainage double precision;

20-06-2025: Vishal

ALTER TABLE IF EXISTS public.report_comment
    ADD COLUMN auditor_reply character varying;

ALTER TABLE IF EXISTS public.report_comment
    ADD COLUMN reply_date timestamp with time zone;


21-07-2025: Vishal

ALTER TABLE IF EXISTS public.report
    ADD COLUMN logo_updated_date timestamp with time zone;

updated_by Bhagavath: 

ALTER TABLE IF EXISTS public.report ADD COLUMN title VARCHAR;
ALTER TABLE IF EXISTS public.report ADD COLUMN title_name VARCHAR;
ALTER TABLE IF EXISTS public.report ADD COLUMN sub_title VARCHAR;
ALTER TABLE IF EXISTS public.report ADD COLUMN title_company VARCHAR;
ALTER TABLE IF EXISTS public.report ADD COLUMN title_contact VARCHAR;
ALTER TABLE IF EXISTS public.report ADD COLUMN title_address VARCHAR;
ALTER TABLE IF EXISTS public.report ADD COLUMN images VARCHAR [];


1-08-2025 - Vishal


ALTER TABLE IF EXISTS public.users_logged_in
    ADD COLUMN email character varying;

ALTER TABLE IF EXISTS public.users_logged_in
    ADD COLUMN otp_time timestamp without time zone;

ALTER TABLE IF EXISTS public.users_logged_in
    ADD COLUMN otp character varying;
 
8-09-2025: Vishal

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN ae_userid character varying;

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN ae_approval character varying;

ALTER TABLE IF EXISTS public.answer_auditwise
    ADD COLUMN ae_comments character varying;

17-09-2025: Vishal

ALTER TABLE IF EXISTS public.report
    ADD COLUMN ae_report character varying;

25-09-2025: Vishal

ALTER TABLE IF EXISTS public.dropdown_values
    ADD COLUMN audit_type character varying;

UPDATE dropdown_values SET audit_type = 'Blackspot Audit' WHERE s_no = 1;
UPDATE dropdown_values SET audit_type = 'Emerging Blackspot Audit' WHERE s_no = 2;
UPDATE dropdown_values SET audit_type = 'Journey Risk Assessment' WHERE s_no = 3;
UPDATE dropdown_values SET audit_type = 'Part of Crash Investigation' WHERE s_no = 4;
UPDATE dropdown_values SET audit_type = 'Redspot Audit' WHERE s_no = 5;
UPDATE dropdown_values SET audit_type = 'Stretch Audit' WHERE s_no = 6;
UPDATE dropdown_values SET audit_type = 'White Corridor Survey' WHERE s_no = 7;


10-11-2025: Vishal

ALTER TABLE IF EXISTS public.audit_plan
    ADD COLUMN audit_type character varying;

16-12-2025: Vishal

ALTER TABLE IF EXISTS public.audit_assignment
    ADD COLUMN field_user character varying;

07-01-2026: Santhosh

ALTER TABLE suggestion_mapping
DROP CONSTRAINT suggestion_link_id;

ALTER TABLE suggestion_mapping
DROP CONSTRAINT suggestion_mapping_pkey;